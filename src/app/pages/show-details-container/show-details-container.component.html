<ng-container *ngIf="templateData$ | async as templateData; else loadingOrError">
	<ng-container *ngIf="templateData.show">
		<app-show-details [show]="templateData.show"></app-show-details>
	</ng-container>
	<div class="review-section">
		<h2 class="title">Reviews</h2>
		<div class="reviews">
			<app-review-form (addReview)="onAddReview($event)"></app-review-form>
			<ng-container *ngIf="currentUserEmail$ | async as currentUserEmail">
				<app-review-list [reviews]="templateData.reviews" [userEmail]="currentUserEmail"
					(deleteReview)="onDeleteReview($event)">
				</app-review-list>
			</ng-container>
		</div>
	</div>
</ng-container>

<ng-template #loadingOrError>
	<ng-container *ngIf="errorObject; else loading">
		<app-error></app-error>
	</ng-container>
	<ng-template #loading>
		<app-loading></app-loading>
	</ng-template>
</ng-template>